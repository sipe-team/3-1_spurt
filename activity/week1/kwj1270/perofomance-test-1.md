# 성능 테스트란 무엇인가?

# 1. 성능 테스트란

주어진 워크로드에서 애플리케이션의 응답시간, 안전성, 확장성, 가용성을 테스트하여 
고객에게 소프트웨어 가치를 최대로 전달할 수 있는지를 측정하는 비기능 소프트웨어 테스트 기법이다.
(안정성, 속도, 확장성, 응답시간, 가용성, 리소스 사용량등)

| 용어 | 설명 |
| --- | --- |
| 응답시간 | 사용자의 요청으로 부터 결과를 반환하기 까지 시간 |
| 안정성 | 워크로드가 다양한 문제 상황에서도 <br>일정한 쿼리티의 제품을 고객에게 제공할 수 있도록 안정적으로 운영되는지 여부 |
| 확장성 | 워크로드에 부하 혹은 시스템의 용량이 임계치에 도달한 경우 <br>시스템을 수직 혹은 수평으로 확장하여 일정한 서비스의 품질을 유지할 수 있는지 여부 |
| 가용성 | 물리적 장애, 어플리케이션의 부하등이 발생 했을때에도, <br>퀄리티를 유지하면서 고객에게 서비스를 제공하는지 여부 |

---

# **2. 성능 테스트의 목표**

성능 테스트의 목표는 애플리케이션 `출력`, `처리 속도`, `데이터 전송 속도`, `네트워크 대역폭 사용량`, 
`최대 동시 사용자`, `메모리 사용률`, `워크로드 효율성`, `명령 응답 시간` 등을 평가하는 것이

1. 예상 목표 TPS를 달성하는가?
2. 피크 시간에서 원활하게 서비스 할 수 있는가?
3. 오랜시간 서비스를 수행하더라도 자원의 누수 없이 서비스를 수행할 수 있는가?
4. 사람이 더 많이 들어오는 경우 수평/수직 확장을 하기 위한 기준은 무엇인가?
5. 일부 시스템이 다운되어도 서비스를 적절히 수행할 수 있는 최소 리소스 요건은 어떻게 되는가?
6. 시스템 리소스가 오버 프로비저닝 되지 않았는가?
7. 시스템 메트릭은 시스템을 잘 설명하고 있는가?
8. 목표 달성을 위한 하드웨어/소프트웨어 어플리케이션 최적 설정값은 무엇인가?

---

# 3. 성능 테스트 **용어**

## 3.1. 용어 정리

| 용어 | 설명 |
| --- | --- |
| Transaction (TX) | - DB트랜잭션과는 다른 의미로, 논리적인 업무 요청의 단위를 트랜잭션이라고 한다.<br>- 사용자가 한번의 요청을 보내는 단위 요청 |

| 용어 | 설명 |
| --- | --- |
| Total User(총 사용자) | - 시스템으로부터 접근 허가를 받은 총 사용자<br>- 현재 서비스요청자+서비스대기자+비접속자 |
| Available User(접속 사용자) | - 총 사용자 중 현재 시스템에 로그 온 되어 있는 사용자  |
| Unavailable User(비접속 사용자) | - 총 사용자 중 현재 시스템에 로그온 되어있지 않은 사용자 |
| Concurrency User(동시 사용자) | - 접속 사용자 중 현재 시스템을 실제로 사용하고 있는 사용자로서<br>- 트랜잭션 발생 조건을 입력하고 있거나, 결과물을 읽고 있는 사용자 트랜잭션을 발생하고 그 결과를 기다리고 있는 사용자<br>- ActiveUser + InActiveUser |
| Active User(현재 서비스 요청자) | - 동시 사용자 중 트랜잭션을 발생하여 결과를 기다리고 있는 사용자<br>현재 서비스에 요청을 보낸 상태에 있는 사용자<br>- 부하 사용자라고도 말한다.<br>- ActiveUser == TPS * 응답시간(Response Time)<br>== ConcurrentUser * 응답시간(Response Time)/요청간격(Request Interval) |
| InActive User(서비스 대기자) | - 동시 사용자 중 트랜잭션 발생 조건을 입력하고 있거나 결과를 읽고 있는 사용자<br>- 서비스에 접속은 하고 있으나 아직 요청을 보내지 않은 사용자 |

![image.png](/.asset/kwj1270/week1-20.png)

- X축은 사용자, 점은 클릭 행위를 나타낸다.
- `Concurrency User` 는 트랜잭션을 발생시키고, 결과를 읽고 있는 사용자
- Y축 기점 6명

![image.png](/.asset/kwj1270/week1-15.png)

- `ActiveUser`는 동시간대에 시스템에 부하를 발생시키는 사용자
- X축 기점 3명

| 용어 | 설명 |
| --- | --- |
| TPS(Transaction Per Second) | - 시스템의 주요 성능 Factor로 초당 발생하는 Business Transactions 건수를 의미<br>- TPM(Transaction Per Minutes), TPH (Transaction Per Hours)로도 나타낼 수 있다.<br>- 1 TPS = 60 TPM = 3600 TPH <br>-  단위시간당 서버가 처리할 수 있는 일의 한계를 나타내는 값으로, <br>사용량이 증가함에 따라 TPS도 증가하게 되며 병목이 발생하게 되면<br>이 수치도 더 이상 증가하지 않는다는 특징을 가지고 있다.<br>- TPS == 부하사용자(ActiveUser)/응답시간(ResponseTime)<br>== 동시사용자(CurrentUser)/요청간격(RequestInterval) |
| Response Time(응답 시간) | - 사용자가 서버로 요청을 보내후 부터 응답이 오기까지 시간 |
| Think Time | - 트랜잭션을 발생한 후 다음 동작을 수행하기까지의 대기시간, 응답을 받고 화면등을 보면서 생각하는 시간<br>- 트랜잭션의 응답시간에 따라 TPS가 달라짐. 사용자의 패턴이 명확할 경우 유용함 |
| Pacing Time | - 지정한 시간 이내에 트랜잭션이 완료되면 남은 시간을 대기, 지정시간 이상 지연되면 바로 다음 동작 수행<br>- 성능 목표를 TPS기준으로 산정하였을 때 정확한 TPS를 발생할 수 있음(단, 트랜잭션이 지정시간 이내로 들어올 경우) |
| Operation Time | - 작업 요청을 보내기 위해서 데이터를 입력하거나, 화면을 채우는 시간 일반적으로 생각 시간에 포함 시킨다. |
| Request Interval | - 요청 간격을 의미<br>- Response Time + Think Time<br>or<br>ResponseTime + Think Time + Operation Time |

## 3.2. **Little’s Law**

MIT가 개설한 경영과학 과정에서 최초로 학위를 받은 존 리틀에 의해 만들어진 
경제와 관련된 법칙으로 프로세스의 안정상태에서의 재고와 산출율 그리고 흐름 시간의 상관관계를 나타낸 법칙

리틀의 법칙의 유용한 점은 매우 단순한 수식이지만 
어떤 시스템의 처리 용량을 알고자 할 때 큰 오차 없이 쉽게 계산할 수 있다. 
간단하고도 유용한 공식이기 때문에 많은 곳에서 응용되는 공식으로 성능 테스트에서도 사용할 수 있다.

![image.png](/.asset/kwj1270/week1-16.png)

다음의 그림은 TPS 와 Response Time의 상관 관계를 나타내는 그래프이다. 
**사용자가 증가함에 따라 처리건수도 같이 증가하나 병목이 발생하여 
더 이상 처리건수가 증가하지 않는 시점부터 응답시간이 지속적으로 증가하게 된다.**

![image.png](/.asset/kwj1270/week1-17.png)

![image.png](/.asset/kwj1270/week1-18.png)

![image.png](/.asset/kwj1270/week1-19.png)