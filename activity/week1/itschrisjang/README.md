# SIPE 3기 1차 미션: 스프링 퍼포먼스 트랙 - 1주차
## 1. 성능의 개념과 주요 병목 지점
### 1.1. 성능의 개념
애플리케이션의 **성능**이란, 주어진 자원(예: CPU, 메모리, 디스크 I/O)을 효율적으로 활용하여 최대한 빠르게 작업을 처리하는 것을 의미합니다. 특히 웹 애플리케이션에서는 **응답 시간, 처리량, 자원 사용률**이 주요 성능 지표로 사용됩니다. 성능은 사용자 경험에 큰 영향을 미치며, 빠르고 안정적인 응답을 제공하는 것이 핵심입니다.

### 1.2. 병목(Bottleneck)이란?
병목(Bottleneck)이란 시스템에서 특정 작업이나 자원의 성능이 전체 시스템의 성능을 제한하는 상황을 말합니다. 병목 지점은 시스템의 처리 속도를 떨어뜨리고, 전체 성능을 저하시킬 수 있습니다. 병목 현상이 발생하면 애플리케이션의 응답 시간이 길어지고, 처리량이 감소하며, 사용자 경험이 저하될 수 있습니다.

### 1.2.1 병목 현상이 발생할 때의 문제점
- **응답 시간 증가**: 병목 현상이 발생하면 애플리케이션의 응답 시간이 길어져 사용자 경험이 저하됩니다.
- **처리량 감소**: 시스템이 처리할 수 있는 작업의 양이 줄어들어 전체 처리량이 감소하게 됩니다.
- **자원 낭비**: 병목 지점에서 과도한 자원을 사용하게 되어, 다른 작업을 위한 자원이 부족해질 수 있습니다.
- **서비스 중단 가능성**: 심각한 경우 시스템이 다운되거나 서비스가 중단될 수 있습니다.

### 1.2.2. 주요 병목 지점
스프링과 자바 스택으로 구성된 시스템에서는 여러 잠재적 병목 지점이 존재할 수 있으며, 아래와 같은 요소들이 성능 저하의 원인이 될 수 있습니다.

1. **데이터베이스 접근**
    - 데이터베이스는 대부분의 애플리케이션에서 가장 빈번하게 발생하는 병목 지점입니다.
    - 잘못된 쿼리, 인덱스가 없는 검색, 너무 많은 조인 및 트랜잭션 잠금 문제 등은 성능 저하의 원인이 됩니다.
    - **해결 방법**: 인덱스 최적화, 쿼리 튜닝, 캐시 사용, 적절한 트랜잭션 격리 수준 설정.

2. **네트워크 지연 및 외부 API 호출**
    - 외부 시스템(API 서버, 서드파티 서비스 등)과의 통신이 포함된 경우, 네트워크 대기 시간이나 외부 서비스의 응답 지연이 병목으로 작용할 수 있습니다.
    - **해결 방법**: 네트워크 호출을 비동기/병렬 처리로 전환하거나, 재시도 및 타임아웃 설정을 통해 실패를 빠르게 감지.

3. **GC(Garbage Collection)**
    - Java 애플리케이션에서는 GC가 성능에 큰 영향을 미칠 수 있습니다. 불필요한 객체 생성, 메모리 부족 문제로 인한 GC가 빈번하게 발생하면 응답 시간 지연을 초래합니다.
    - **해결 방법**: 적절한 GC 알고리즘 선택, 객체 생명 주기 관리, 힙 메모리 최적화, 객체 재사용 패턴 적용.

4. **스레드 풀 과부하**
    - Java 애플리케이션의 동시성을 관리하기 위해 스레드 풀을 사용합니다. 그러나 스레드 풀의 크기가 적절하지 않으면 성능 문제가 발생할 수 있습니다.
    - 스레드 풀이 너무 크면 컨텍스트 스위칭 오버헤드가 증가하고, 너무 작으면 작업 대기 시간이 증가하여 성능이 저하됩니다.
    - **해결 방법**: 적절한 스레드 풀 크기 설정 및 모니터링.

5. **I/O 작업**
    - 파일 읽기/쓰기, 네트워크 소켓 등 I/O 작업이 오래 걸리면 성능이 저하될 수 있습니다.
    - 동기 I/O가 비효율적이라면 비동기 I/O로 전환하는 것도 방법입니다.
    - **해결 방법**: 비동기 I/O 도입, NIO(Non-blocking I/O) 사용, 파일 캐시.

6. **잘못된 코드 구조 및 비효율적인 알고리즘**
    - 비효율적인 코드 구조(예: 중복 계산, 과도한 반복문)는 불필요한 CPU 사용과 메모리 사용을 초래할 수 있습니다.
    - **해결 방법**: 프로파일링 도구를 활용해 성능 병목이 발생하는 코드를 찾아 최적화.

### 1.2.3. 병목 현상 해결 방법
병목 현상을 해결하기 위해서는 주요 병목 지점을 파악하고, 이를 개선할 수 있는 전략을 세워야 합니다. 다음은 병목을 해결하기 위한 몇 가지 방법입니다.

1. **프로파일링 도구 사용**:
   - 병목 지점을 파악하기 위해 프로파일링 도구를 사용하여 CPU, 메모리, 스레드 상태 등을 분석합니다. 이를 통해 문제가 발생하는 부분을 정확히 식별할 수 있습니다.

2. **쿼리 최적화 및 캐싱**:
   - 데이터베이스 접근이 병목 지점인 경우, 쿼리를 최적화하거나 필요한 데이터를 캐싱하여 데이터베이스 부하를 줄입니다.

3. **네트워크 호출 비동기 처리**:
   - 외부 API 호출이나 네트워크 작업은 비동기 방식으로 처리하여 병목 지점을 줄입니다. 비동기 처리를 통해 응답 시간을 단축하고, 작업의 병렬성을 높일 수 있습니다.

4. **적절한 GC 튜닝**:
   - 메모리 관리가 병목의 원인일 경우, 적절한 GC 알고리즘을 선택하고 메모리 사용량을 최적화하여 GC 실행 횟수를 줄입니다.

5. **스레드 풀 최적화**:
   - 스레드 풀 크기를 적절히 설정하여 작업의 동시성 및 자원 사용률을 조정합니다. 스레드 풀을 적절히 관리하면 병렬 작업의 효율성을 높일 수 있습니다.

6. **비동기 I/O 및 NIO 사용**:
   - 많은 I/O 작업을 비동기 방식으로 처리하거나 Java의 NIO(Non-blocking I/O)를 사용하여 병목 지점을 줄입니다.

7. **코드 최적화**:
   - 비효율적인 코드 구조나 알고리즘을 최적화하여 리소스 사용을 줄이고, 성능을 개선할 수 있습니다.

---

## 2. 성능/병목을 측정하는 도구의 종류

### 2.1. 성능 테스트 (Performance Testing)
- 목적: 애플리케이션이 주어진 조건에서 성능 지표를 얼마나 충족하는지 확인합니다. 주요 지표는 응답 시간, 처리량, 자원 사용률(CPU, 메모리) 등이 있습니다.
- 초점: 시스템의 응답 속도와 효율성을 확인하고, 최적의 성능을 발휘할 수 있는지 평가합니다.
- 예시: 특정 트랜잭션을 처리하는 데 걸리는 평균 응답 시간을 확인하여 시스템이 요구되는 응답 시간을 충족하는지 확인하는 경우.
### 2.1.1. 성능 테스트의 필요성
성능 테스트는 시스템의 성능과 안정성을 보장하기 위해 필수적인 과정입니다. 다음은 성능 테스트가 필요한 주요 이유 5가지입니다.

#### 2.1.1. 사용자 만족도
성능 테스트는 성능 문제를 식별하고 해결하여 시스템이 사용자 기대에 부합하도록 돕습니다. 원활하고 끊김 없는 사용자 경험을 제공함으로써, 기업은 고객을 유지하고, 평판을 개선하며 경쟁력을 높일 수 있습니다.

#### 2.1.2. 시스템 안정성
성능 테스트를 통해 다양한 작업 부하를 시스템에 적용하여 잠재적인 병목 지점, 확장성의 한계, 시스템 장애 등을 파악할 수 있습니다. 이러한 문제를 사전에 해결함으로써 시스템이 안정적으로 작동하고 예상되는 부하를 처리하는 데 문제가 없도록 보장할 수 있습니다.

#### 2.1.3. 확장성 평가
시스템과 애플리케이션은 증가하는 작업 부하와 사용자 요구에 대응할 수 있어야 합니다. 성능 테스트를 통해 시스템이 다양한 부하 수준에서 어떻게 작동하는지 평가함으로써, 확장성의 한계를 파악하고 향후 성장에 대비한 최적화를 수행할 수 있습니다.

#### 2.1.4. 성능 최적화
성능 테스트를 통해 응답 시간, 처리량, 자원 활용도와 같은 지표를 측정하여 성능 병목 현상을 파악하고 자원 할당을 최적화하며 시스템 효율성을 개선할 수 있습니다. 성능 테스트는 시스템을 미세 조정하여 최적의 성능을 달성할 수 있도록 돕습니다.

#### 2.1.5. 위험 완화
성능 문제는 기업에 심각한 영향을 미칠 수 있습니다. 예를 들어, 재정적 손실, 고객 불만, 평판 손상 등의 위험이 있습니다. 성능 테스트를 통해 성능 문제를 사전에 해결함으로써, 운영 환경에서의 치명적인 오류 발생 가능성을 최소화하고 관련된 위험을 줄일 수 있습니다.
Java 스택과 Spring 환경에서 성능을 측정하고 병목을 찾기 위한 다양한 도구들이 있습니다. 주요 성능 도구와 그 기능에 대해 설명합니다.

### 2.2. 부하 테스트 (Load Testing)
- 목적: 시스템이 **일정 수준의 부하(트래픽)**에서 어떻게 작동하는지 평가합니다.
- 초점: 시스템이 정상적으로 부하를 처리할 수 있는지, 병목 현상이 발생하지 않는지, 성능 저하 없이 요구되는 사용자 수를 지원할 수 있는지 확인합니다.
- 예시: 1000명의 사용자가 동시에 접속할 때 시스템의 응답 시간이 허용 가능한 범위 내에 있는지 테스트하는 경우.
> #### 성능 테스트와 부하 테스트 주요 차이점 요약
> - 성능 테스트는 주어진 조건에서 성능 지표에 집중하는 반면, 부하 테스트는 특정 부하 수준에서의 시스템 안정성 및 처리 능력을 평가합니다.
> - 성능 테스트는 다양한 지표를 평가해 최적화에 초점을 맞추고, 부하 테스트는 실제 트래픽 수준에서의 안정성에 초점을 맞춥니다.

### 2.3. 주요 성능 테스트 유형
#### 2.3.1. 부하 테스트 (Load Testing)
- **목적**: 시스템이 정상적인 조건과 최대 부하 조건에서 어떻게 동작하는지 평가합니다.
- **특징**: 실제 사용자 부하를 시뮬레이션하여 시스템의 성능, 응답 시간, 자원 활용도, 처리량을 측정합니다.

#### 2.3.2. 스트레스 테스트 (Stress Testing)
- **목적**: 시스템에 극한의 부하를 가하여 시스템의 한계점을 파악하고, 실패 이후의 복구 능력을 관찰합니다.
- **특징**: 시스템이 한계점에 도달할 때의 동작을 평가하며, 복구 과정에서 발생하는 문제를 확인합니다.

#### 2.3.3. 소크 테스트 (Soak Testing)
- **목적**: 일정한 부하를 장시간 동안 가하여 시간이 지나면서 발생하는 성능 저하나 문제를 파악합니다.
- **특징**: 장기적인 부하 상황에서의 시스템 안정성과 성능 변화를 평가합니다.

#### 2.3.3. 스파이크 테스트 (Spike Testing)
- **목적**: 갑작스럽고 큰 부하 증가 상황에서 시스템이 잘 대처하는지를 평가합니다.
- **특징**: 예상치 못한 급격한 트래픽 증가에 대한 시스템의 대응력을 확인합니다.

#### 2.3.4. 확장성 테스트 (Scalability Testing)
- **목적**: 시스템이 다양한 작업 부하나 사용자 수요에 따라 확장되거나 축소되는 능력을 평가합니다.
- **특징**: 부하가 증가하거나 감소할 때 시스템의 성능이 어떻게 변하는지 확인할 수 있습니다.

#### 2.3.5. 볼륨 테스트 (Volume Testing)
- **목적**: 대량의 데이터를 처리할 때 시스템의 성능을 평가합니다.
- **특징**: 데이터 양이 큰 환경에서 시스템이 안정적으로 작동하는지 확인합니다.

#### 2.3.6. 격리 테스트 (Isolation Testing)
- **목적**: 시스템의 개별 구성 요소 또는 모듈을 독립적으로 테스트하여 성능을 평가하고 문제를 식별합니다.
- **특징**: 특정 모듈의 성능 문제를 진단하고, 다른 구성 요소의 영향 없이 테스트합니다.

### 2.4. 2024년 성능 테스트 도구 Top 20

#### 2.4.1. Apache JMeter
Apache JMeter는 Apache Software Foundation에서 개발한 강력한 오픈 소스 도구로, 웹 애플리케이션, API, 데이터베이스 및 기타 서버 기반 시스템의 부하 및 성능 테스트에 널리 사용됩니다. 다양한 시나리오를 시뮬레이션하고 부하를 생성하여 시스템이 다양한 조건에서 어떻게 동작하는지 평가할 수 있습니다.

- **주요 기능 및 특징**:
   - 여러 대의 컴퓨터에서 테스트를 분산 수행하여 현실적인 부하를 생성
   - HTTP, HTTPS, SOAP, JDBC, FTP 등 다양한 프로토콜 지원으로 폭넓은 성능 테스트 가능
   - 그래픽으로 표현되는 광범위한 보고서와 분석 기능 제공
   - 사용자 친화적인 GUI 또는 Groovy 스크립트를 사용하여 쉽게 스크립트 생성 가능
   - 플러그인 생태계를 통해 고급 기능을 추가할 수 있음

- **호환성**:
   - Windows, macOS, Linux에서 사용 가능
   - Apache, Nginx, IIS와 같은 웹 서버 및 MySQL, Oracle, PostgreSQL 등의 데이터베이스 테스트 지원

- **통합**:
   - CI/CD 통합을 통해 빌드 및 배포 프로세스 내에서 성능 테스트를 수행할 수 있음
   - Selenium과 통합하여 웹 애플리케이션의 기능 및 성능 테스트를 함께 수행 가능

#### 2.4.2. Gatling
Gatling은 웹 애플리케이션의 성능과 확장성을 평가하는 오픈 소스 부하 테스트 도구입니다. 비동기 및 논블로킹 I/O 원칙에 따라 설계되어 효율적인 리소스 사용이 가능하며, 많은 동시 사용자 부하를 처리할 수 있습니다.

- **주요 기능 및 특징**:
   - 테스트 스크립트 생성을 단순화하는 DSL 제공
   - 실시간 모니터링 및 성능 지표 보고서 제공
   - 고도의 동시 사용자 부하를 효율적으로 처리하여 정확한 성능 평가 가능

- **호환성**:
   - HTTP, HTTPS, WebSocket 프로토콜을 지원하여 다양한 웹 시스템 테스트 가능

- **통합**:
   - Maven, Gradle, Jenkins, Bamboo 등의 CI/CD 도구와 원활하게 통합

#### 2.4.3. BrowserStack App Performance
BrowserStack App Performance는 모바일 애플리케이션의 성능을 평가하기 위한 포괄적인 도구입니다. 다양한 조건에서 모바일 앱의 응답성, 속도 및 안정성을 테스트할 수 있습니다.

- **주요 기능 및 특징**:
   - 20,000개 이상의 실제 장치로 테스트 가능
   - FPS, ANR 비율, 페이지 로딩 시간, 디바이스 리소스 사용 등을 실시간으로 분석
   - 3G, 4G, Wi-Fi 등 다양한 네트워크 조건 시뮬레이션 가능

- **호환성**:
   - iOS 및 Android 모바일 앱과 호환, 다양한 프레임워크와 기술 지원

- **통합**:
   - Appium, Selenium, Jenkins, Bamboo, TeamCity와 통합하여 성능 및 기능 테스트를 자동화 가능

#### 2.4.4. LoadRunner
LoadRunner는 Micro Focus에서 개발한 성능 테스트 도구로, 실사용자 트래픽을 시뮬레이션하여 애플리케이션의 성능, 확장성, 안정성을 테스트할 수 있습니다.

- **주요 기능 및 특징**:
   - 다양한 프로토콜을 지원하여 현실적인 애플리케이션 시뮬레이션
   - 강력한 스크립트 언어로 시나리오 커스터마이징 가능

- **호환성**:
   - Windows 및 Linux와 호환되며 다양한 OS, 웹 서버, 애플리케이션 서버 지원

- **통합**:
   - Jenkins, Azure DevOps와 통합하여 CI/CD 파이프라인에서 성능 테스트 가능

#### 2.4.5. BlazeMeter
BlazeMeter는 Broadcom(구 CA Technologies)에서 제공하는 클라우드 기반의 부하 테스트 플랫폼으로, Apache JMeter, Gatling, Selenium WebDriver와 같은 오픈 소스 테스트 도구를 사용하여 성능 테스트를 수행할 수 있습니다.

- **주요 기능 및 특징**:
   - 클라우드 기반 부하 생성으로 높은 사용자 부하 시뮬레이션 가능
   - 실시간 모니터링과 성능 지표 보고서 제공
   - 팀 협업과 테스트 결과 공유를 위한 기능 지원

- **호환성**:
   - 다양한 기술 스택 및 프레임워크와 호환 가능 (Java, .NET, PHP, Node.js 등)

- **통합**:
   - Jenkins, GitLab, Bamboo, New Relic, Dynatrace 등과 통합 가능

#### 2.4.6. Locust
Locust는 Python 기반의 오픈 소스 분산 부하 테스트 도구로, 웹 애플리케이션, API, 네트워크 기반 서비스의 성능과 확장성을 측정하는 데 사용됩니다.

- **주요 기능 및 특징**:
   - Python을 사용한 간단하고 읽기 쉬운 구문으로 테스트 시나리오 작성 가능
   - 웹 기반 대시보드를 통한 실시간 모니터링 기능 제공

- **호환성**:
   - HTTP 및 HTTPS 프로토콜 지원, 다양한 웹 애플리케이션과 API 테스트 가능

- **통합**:
   - Python 라이브러리 및 도구와의 유연한 통합
   - CI/CD 파이프라인에 통합 가능

#### 2.4.7. K6
K6는 웹 애플리케이션과 API의 부하 및 성능 테스트를 위한 오픈 소스 도구입니다. 간단한 사용법과 현대적인 개발 환경과의 통합성으로 유명합니다.

- **주요 기능 및 특징**:
   - JavaScript로 테스트 스크립트를 작성하여 직관적이며 쉽게 사용할 수 있음
   - 실시간 모니터링 및 테스트 결과 분석 지원
   - 성능 검사 및 임계값 설정 기능을 통해 시스템 동작을 검증하고 통과/실패 기준 설정 가능

- **호환성**:
   - HTTP/1.1 및 HTTP/2 프로토콜을 지원하며, RESTful API, 마이크로서비스, 웹 애플리케이션 테스트 가능

- **통합**:
   - Jenkins, GitLab, Travis CI 등의 CI/CD 도구와 통합하여 자동화된 성능 테스트 가능
   - Grafana Cloud 및 k6 Cloud와 통합하여 결과 저장, 분석, 공유 가능


