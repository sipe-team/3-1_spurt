# 소프트웨어 성능 테스트(Software performance testing)

가독성을 위해 노션 링크를 추가하였습니다.
[노션 바로가기!](https://sangjunn.notion.site/Software-performance-testing-132976a7f2238034b09ad7a15d37d29b?pvs=4)

https://en.wikipedia.org/wiki/Software_performance_testing

---

- 성능테스트란, 특정 작업 부하 하에서 시스템이 **응답성과 안정성 측면에서 어떻게 작동하는지**를 확인하기 위해 수행되는 테스트입니다.
- 테스트의 중요 목표는 다음과 같습니다.
    - 응답성(**responsiveness): 시스템이 사용자 응답에 얼마나 빠르게 반응하는지 측정**
    - 안정성(**stability): 높은 부하환경에서도 시스템이 오류없이 안정적으로 유지되는지 확인**
- 이 외에도, **확장성**(더 많은 사용자나 요청을 처리할 수 있는 능력), **신뢰성**(오류 발생 가능성), **자원 사용량**과 같은 품질 속성 값도 평가의 대상이 됩니다.
- 정리하자면, 시스템 가용성(Availability)을 판단하기 위해 수행합니다.
    - 시스템이 서비스를 정상적으로 제공할 수 있는 상태

## 1. 테스트 종류

---

- 테스트의 종류는 아래 목적이나 시나리오에 따라 구분 할 수 있습니다.

### Smoke testing(스모크 테스트)

https://m.blog.naver.com/PostView.nhn?blogId=wisestone2007&logNo=220868861867&proxyReferer=https:%2F%2Fwww.google.com%2F

- 최소한의 부하를 주어 시스템이 정상적으로 동작하는지 확인하는 테스트입니다.
- **Smoke Test는 안정성(stability)을 확인하는 테스트**
    - 아래 **Sanity Test(정합성 테스트)와의 차이점 참고**

### Load testing(부하 테스트)

- 가장 기본적인 테스트로, 목표 값에 해당되는 부하를 견딜 수 있는지 확인하는 테스트입니다.
- 여기서 부하(workload)는 크게, 특정 시간 동안 수행되는 예상 동시 사용자수 또는 트랜잭션 수 일 수 있다.
- 중요한 비즈니스 트랜잭션의 응답 시간을 측정하는 데 도움을 주며, 데이터베이스, 애플리케이션 서버 등의 병목 현상을 식별하는 데도 유용하다.

### **Stress testing (스트레스 테스트)**

- 시스템의 용량 한계(최대 처리 용량)를 파악하기 위해 수행하는 테스트
- 부하테스트는 목표치에 대한 테스트 였다면, 스트레스 테스트는 최대치에 해당하는 테스트
- 부하테스트를 먼저 진행하고 수행하는 것이 좋다. 병목구간을 파악하기 위해 부하테스트를 먼저 진행한다.
- 극한의 부하 하에서 시스템의 견고성을 평가하고, 부하 수준이 예상보다 높아지더라도 시스템이 정상적으로 작동할 수 있는지 판단하는 데 도움을 준다.
- 부하테스트를 진행하고 실행하는 것이 좋다!

### **Soak testing (침수 테스트)**

- 장기간의 지속적인 예상 부하 하에서 시스템이 안정적으로 작동할 수 있는지 테스트
- 평균 사용률로 일정부하를 지속적으로 주며, 시스템이 문제되는 지점을 확인
- Endurance Test (내구 테스트)라고도 한다.
- 주요 파악 사항
    - 메모리 누수 및 성능 저하 문제를 파악하기 위해, 메모리 사용량을 모니터링
    - 시간이 지나도 처리량과 응답시간이 초기와 동일하게 유지되는지 확인

### **Spike testing (스파이크 테스트)**

- 매우 많은 사용자 수의 부하를 갑자기 증가 혹은 감소시켜 시스템의 반응을 관찰하는 테스트
- 성능 저하, 시스템 오류, 또는 급격한 부하 변화에 대한 시스템의 처리 능력을 평가하는 데 사용
- 상황 예시: 수강신청시 사용자 급증

### **Breakpoint testing (임계점 테스트)**

- **Stress테스트와 유사하게, 시스템 용량의 한걔를 확인하기 위해 점진적인 부하 테스트. 시스템이 사전에 정해진 오류조건에 도달하는지 모니터링한다.**
- 시스템이 필요한 사양, 서비스 수준 계약(SLA)아래에서 최대 용량을 파악하는 데 도움을 준다. 이는 클라우드 환경에서 스케일링 전략을 결정하는데 도움이 된다.

### **Configuration testing (구성 테스트)**

- 구성 변경의 효과를 평가하기 위해 수행되는 테스트
- 일반적으로 로드 밸런싱과 같은 다양한 방법을 실험하는 테스트

### **Isolation testing (격리 테스트)**

- 문제를 고립시키고 해당 문제 영역을 확인하는 테스트
- 시스템 문제를 재현하기 위해 문제 발생시와 동일한 테스트를 반복 실행한다.

### 정리. 테스트 그래프 비교

---

- 위의 테스트 종류를 한눈에 보면 다음과 같습니다.

![chart-load-test-types-overview.png](%E1%84%89%E1%85%A9%E1%84%91%E1%85%B3%E1%84%90%E1%85%B3%E1%84%8B%E1%85%B0%E1%84%8B%E1%85%A5%20%E1%84%89%E1%85%A5%E1%86%BC%E1%84%82%E1%85%B3%E1%86%BC%20%E1%84%90%E1%85%A6%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3(Software%20performance%20test%20132976a7f2238034b09ad7a15d37d29b/chart-load-test-types-overview.png)

- x축 Duration은 테스트 실행시간을 의미합니다.
- y축 VUser/Throught은

## 2. 테스트 선정 기준

- 서비스의 상황에 맞게, 알맞은 테스트를 선정하는 것은 중요합니다.
- 그렇다면, 위의 타입 중, 어떤 테스트를 선정해야 할까요? 해당 테스트를 선정하는데 연관을 미치는 테스트 목표 및 시나리오에 대해 구체적으로 살펴보겠습니다.

## 테스트 계획 수립

---

### 성능 예산 구하기

1. 응답의 최소 레이턴시(응답시간) 정하기
    1. 예: 최대 지연시간 0.3초(300ms)으로 설정
2. 서비스가 Peak일 때의 사용자 수 구하기 
    1. 사용자가 Peak때 보다 더 넉넉하게 설정
    2. User의 상황에 맞게 설정 (비로그인 사용자 등등)

## 참고. 테스트 비교 2가지

### 1️⃣ **Sanity Test(정합성 테스트)와 Smoke Test의 차이**

https://www.guru99.com/smoke-sanity-testing.html

![Sanity_Smoke_Testing.webp](%E1%84%89%E1%85%A9%E1%84%91%E1%85%B3%E1%84%90%E1%85%B3%E1%84%8B%E1%85%B0%E1%84%8B%E1%85%A5%20%E1%84%89%E1%85%A5%E1%86%BC%E1%84%82%E1%85%B3%E1%86%BC%20%E1%84%90%E1%85%A6%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3(Software%20performance%20test%20132976a7f2238034b09ad7a15d37d29b/Sanity_Smoke_Testing.webp)

1. 목표의 차이
    - **Smoke Test는 안정성(stability)을 확인하는 테스트입니다. 주요 기능이 제대로 작동하는지 확인하며 제품의 안정성을 유지하기 위해 본 테스트 전, 한번 확인하는 작업입니다.**
    - 이와 반대로 **Sanity Test는 합리성(rationality)을 검증하는 테스트 입니다.**
2. 담당자의 차이
    - **Smoke Test는 개발자 및 테스터에 의해 수행되지만, Sanity Test의 경우 테스터에 의해 수행됩니다.**
3. 테스트 검증 목표의 차이
    - **Smoke Test는 시스템의 주요 기능들(critical functionalities)이 제대로 작동하는지 확인하는 반면, Sanity Test는 버그 수정과 같은 새로운 기능이 제대로 작동하는지 확인한다.**
4. 범위의 차이
    - **Smoke Test는 전체 시스템의 end to end를 확인하는 반면, Sanity Test는 특정 컴포넌트만 확인한다.**

### 2️⃣ Load Testing과 Stress Testing의 차이

https://queue-it.com/blog/load-vs-stress-testing/

![load-testing-vs-stress-testing.png](%E1%84%89%E1%85%A9%E1%84%91%E1%85%B3%E1%84%90%E1%85%B3%E1%84%8B%E1%85%B0%E1%84%8B%E1%85%A5%20%E1%84%89%E1%85%A5%E1%86%BC%E1%84%82%E1%85%B3%E1%86%BC%20%E1%84%90%E1%85%A6%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3(Software%20performance%20test%20132976a7f2238034b09ad7a15d37d29b/load-testing-vs-stress-testing.png)
